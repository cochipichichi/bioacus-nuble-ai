
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>BioAcus-Ã‘uble AI â€” v1.1</title>
<link rel="manifest" href="manifest.webmanifest">
<link rel="icon" href="assets/img/logo.svg" type="image/svg+xml">
<meta name="theme-color" content="#0c0f10">
<link rel="preload" href="assets/css/style.css" as="style"><link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
<header>
  <div class="container flex">
    <a class="logo" href="./" aria-label="Inicio">
      <img src="assets/img/logo.svg" alt="BioAcus-Ã‘uble AI logo">
      <div>
        <strong>BioAcus-Ã‘uble AI</strong><br><span class="small">Huella acÃºstica Â· TinyML/Browser</span>
      </div>
    </a>
    <span class="badge">PWA</span>
    <div class="toolbar">
      <a class="btn" href="viewer3d/">ğŸ‘ï¸ 3D</a>
      <a class="btn" href="viewerAR/">ğŸ“± AR</a>
      <a class="btn" href="viewerVR/">ğŸ¥½ VR</a>
      <button id="btn-export" class="btn">ğŸ’¾ Exportar dataset</button>
      <div class="theme-switcher">
        <button id="themeBtn" class="btn">ğŸ¨ <span id="themeLabel">ğŸŒ™ Oscuro</span></button>
        <div id="themeMenu" class="theme-menu">
          <button class="btn" onclick="setTheme('dark')">ğŸŒ™ Oscuro</button>
          <button class="btn" onclick="setTheme('light')">â˜€ï¸ Claro</button>
          <button class="btn" onclick="setTheme('contrast')">âš¡ Alto contraste</button>
          <button class="btn" onclick="setTheme('sepia')">ğŸ“œ Sepia</button>
        </div>
      </div>
    </div>
  </div>
</header>

<main class="container">
  <section class="grid">
    <div class="card col-8">
      <h2>ğŸ™ï¸ Grabador + Espectrograma (en vivo)</h2>
      <div class="flex gap">
        <button id="btn-start" class="btn solid">â–¶ï¸ Iniciar</button>
        <button id="btn-stop" class="btn">â¹ï¸ Detener</button>
        <span id="rec-state" class="small" style="opacity:.8">â€”</span>
      </div>
      <canvas id="spect" class="spect" aria-label="Espectrograma en vivo"></canvas>
      <p class="small">Privacidad: la app procesa audio en tu navegador; por defecto no guarda audio crudo. Solo exporta â€œhuellasâ€ (vectores de 16 bandas).</p>
    </div>

    <div class="card col-4">
      <h2>ğŸ§ª Dataset de huellas</h2>
      <label>Etiqueta: <input id="label" type="text" value="Chucao"></label>
      <div class="flex gap" style="margin-top:8px">
        <button id="btn-capture" class="btn">â• Capturar huella</button>
        <button id="btn-train" class="btn solid">ğŸ§  Calcular centroides</button>
      </div>
      <hr class="sep">
      <h3 class="small">ğŸ¯ Captura por ventana</h3>
      <div class="flex gap">
        <label>Segundos: <input id="window-sec" type="number" min="1" max="10" value="2"></label>
        <label>Tomas: <input id="window-shots" type="number" min="1" max="10" value="3"></label>
        <button id="btn-window-capture" class="btn">ğŸ™ï¸ Tomar ventanas</button>
      </div>
      <p id="status" class="small">â€”</p>
      <hr class="sep">
      <h3 class="small">ğŸ“¥ Importar / ğŸ“¤ Exportar</h3>
      <input id="file-import" type="file" accept=".json">
    </div>

    <div class="card col-6">
      <h2>ğŸ” ClasificaciÃ³n (tiempo real)</h2>
      <div class="kpi"><div><div class="label">Ahora:</div><div id="now-predict" class="value">â€”</div></div><span class="tag">PredicciÃ³n</span></div>
      <canvas id="bars" class="bars" aria-label="Probabilidades por clase"></canvas>
      <p class="small">Clasificador por centroides (coseno + softmax).</p>
    </div>

    <div class="card col-6">
      <h2>ğŸŒ MQTT (opcional)</h2>
      <div class="small">ConÃ©ctate a un broker <code>wss://</code> y suscrÃ­bete a <code>bioacus/fp</code> (o el que definas).</div>
      <div class="flex gap" style="margin:8px 0">
        <label>URL wss: <input id="mqtt-url" type="url" placeholder="wss://broker:port/mqtt"></label>
        <label>Usuario: <input id="mqtt-user" type="text" placeholder=""></label>
        <label>Clave: <input id="mqtt-pass" type="text" placeholder=""></label>
        <label>Tema: <input id="mqtt-topic" type="text" value="bioacus/fp"></label>
      </div>
      <div class="flex gap">
        <button id="btn-mqtt-connect" class="btn">ğŸ”Œ Conectar</button>
        <button id="btn-mqtt-disconnect" class="btn">âŒ Desconectar</button>
        <span id="mqtt-state" class="small">Desconectado</span>
      </div>
      <p class="small">Payload esperado: {"ts": 1730000000000, "bands":[16 valores], "label":"opcional"}</p>
    </div>

    <div class="card col-12">
      <h2>ğŸ—ºï¸ Mapa calor horario</h2>
      <div class="flex gap">
        <label>Ãšltimos dÃ­as: <input id="heat-days" type="number" min="1" max="30" value="7"></label>
      </div>
      <canvas id="heatmap" class="canvas-heat" aria-label="Mapa de calor por hora y dÃ­a"></canvas>
      <p class="small">Cuenta de capturas/ingestas por hora (filtrado a los Ãºltimos N dÃ­as). Ãštil para ver patrones de actividad.</p>
    </div>
  </section>
</main>

<div class="floatbar">
  <a class="btn" href="viewer3d/">ğŸ‘ï¸ 3D</a>
  <a class="btn" href="viewerAR/">ğŸ“± AR</a>
  <a class="btn" href="viewerVR/">ğŸ¥½ VR</a>
</div>

<footer class="container">
  belen.acpe@gmail.com Â· ğŸ“ +56 9 6266 4960<br>
  ğŸ‘¨â€ğŸ’» Francisco Pinto â€” ğŸ“§ franciscoandresp@gmail.com Â· ğŸ“ +56 9 2002 7992<br>
  Hecho con â¤ï¸ para el Liceo Bicentenario de Excelencia Polivalente San NicolÃ¡s â€” Proyecto Educativo Â· ğŸ‘ï¸ 3D ğŸ“± AR ğŸ¥½ VR
</footer>

<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
<script type="module" src="assets/js/app.js"></script>
</body>
</html>
